[TOC]

![](./pic/JVM.png)

## 1. 垃圾回收

### 1.1. 内存模型

![](./pic/JVM-memory-model.png)

JVM 内存共分为虚拟机栈，堆，方法区，程序计数器，本地方法栈五个部分。

==线程私有：==栈，本地方法栈，程序计数器

==线程共享：==方法区，堆

**1. 虚拟机栈**

又称方法栈,线程私有的,线程执行方法是都会创建一个栈帧,用来存储局部变量表,操作栈,动态链接,方 法出口等信息.调用方法时执行入栈,方法返回式执行出栈. 

**栈帧**：

**2. 本地方法栈**

与栈类似,也是用来保存执行方法的信息.执行Java方法是使用栈,执行Native方法时使用本地方法栈. 

**3. 程序计数器**

保存着当前线程执行的字节码位置,每个线程工作时都有独立的计数器,只为执行Java方法服务,执行 Native方法时,程序计数器为空. 

**4. 堆** 

JVM内存管理最大的一块,对被线程共享,目的是存放对象的实例,几乎所欲的对象实例都会放在这里, 当堆没有可用空间时,会抛出OOM异常.根据对象的存活周期不同,JVM把对象进行分代管理,由垃圾回 收器进行垃圾的回收管理 

**5. 方法区**

又称非堆区,用于存储已被虚拟机加载的类信息,常量,静态变量,即时编译器优化后的代码等数据



### 1.2. 分代理论

1）弱分代假说：绝大多数对象的生命周期都很短，绝大多数的对象都是朝生夕灭的。

2）强分代假说：熬过越多次垃圾收集过程的对象越难以消亡。

todo ...



